<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>재고 관리 - TG</title>
    <script type="module">
        // Supabase 라이브러리 불러오기
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

        // Supabase 설정
        const supabaseUrl = "https://fczcjazalhaotsohhxez.supabase.co";  // 여기서 Supabase 프로젝트 URL을 붙여넣기
        const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZjemNqYXphbGhhb3Rzb2hoeGV6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzAwOTc1MzksImV4cCI6MjA0NTY3MzUzOX0.FxqdrykXJh5LJ-LNsVJOb50VflprQjv5mljdzL1qExo";  // 여기에 API 키 붙여넣기
        const supabase = createClient(supabaseUrl, supabaseKey);

        // 데이터 불러오기
        async function loadData() {
            const { data, error } = await supabase.from('inventory').select('*');
            if (error) {
                console.error("데이터 불러오기 오류:", error);
                return;
            }

            const tableBody = document.getElementById("inventory-table-body");
            tableBody.innerHTML = "";

            // 데이터를 테이블 행으로 추가
            data.forEach(row => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${row.serial_number}</td>
                    <td>${row.stock_quantity}</td>
                    <td>${row.manager}</td>
                    <td>${row.last_updated}</td>
                `;
                tableBody.appendChild(tr);
            });
        }

        // 페이지 로드 시 데이터 불러오기
        document.addEventListener("DOMContentLoaded", loadData);
    </script>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #00CAFF;
            color: white;
        }
    </style>
</head>
<body>

<header>
    <h1>재고 관리 - TG</h1>
</header>

<table>
    <thead>
        <tr>
            <th>시리얼 넘버</th>
            <th>재고 수량</th>
            <th>관리자</th>
            <th>최근 기록일</th>
        </tr>
    </thead>
    <tbody id="inventory-table-body">
        <!-- 데이터 행이 여기에 추가됩니다 -->
    </tbody>
</table>

<footer>
    <p>© 2024 1조 현장개선 프로젝트</p>
</footer>

</body>
</html>
